{% extends 'shared/base.html' %}
{% load static %}

{% block stylesheets %}
    <link rel="stylesheet" href="{% static 'submissions.css' %}">
    <link rel="stylesheet" href="{% static 'report.css' %}">
{% endblock %}

{% block content %}
    <h1>Report for: {{ student.first_name }} {{ student.last_name }}</h1>

    <form action="{% url 'student_update' %}" method="post">
        {% csrf_token %}
        Cohort: <select name="cohort">
            <option value="">Choose student's cohort...</option>
            <option value="null">Not a current student</option>
            {% for cohort in cohorts %}
                <option {% if student.cohort.id == cohort.id %}selected{% endif %} value="{{ cohort.id }}">{{ cohort.name }}</option>
            {% endfor %}
        </select>
        <input type="hidden" value="{{ student.id }}" name="student" />
        <button>Update</button>
    </form>

    <h2>Scores</h2>
    <report>
        <classroom>Intro to Variables: {{ scores.intro_variables_percent|stringformat:"d%%" }}</classroom>
        <classroom>Intro to Arrays: {{ scores.intro_iteration_percent|stringformat:"d%%" }}</classroom>
        <classroom>Intro to Objects: {{ scores.intro_objects_percent|stringformat:"d%%" }}</classroom>
        <classroom>Intro to Functions: {{ scores.intro_functions_percent|stringformat:"d%%" }}</classroom>
        <classroom>Conditions Practice: {{ scores.condition_percent|stringformat:"d%%" }}</classroom>
        <classroom>Arrays Practice: {{ scores.iteration_percent|stringformat:"d%%" }}</classroom>
        <classroom>Functions Practice: {{ scores.function_percent|stringformat:"d%%" }}</classroom>
    </report>

    <h2>Submission History</h2>
    {% for submission in submissions %}
    <section class="submission">
        <div class="submission__classroom">
            {{ submission.classroom.title }}
        </div>
        <div class="submission__exercise">
            {{ submission.exercise }}
        </div>
        <div class="submission__timestamp">
            {{ submission.time_submitted|date:"M d, Y H:i" }}
        </div>
    </section>
    {% endfor %}

{% endblock %}
